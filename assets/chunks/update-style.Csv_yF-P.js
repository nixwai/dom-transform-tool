var h=Object.defineProperty;var f=(i,t,s)=>t in i?h(i,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):i[t]=s;var n=(i,t,s)=>f(i,typeof t!="symbol"?t+"":t,s);function a(i){return i&&Number.parseFloat(i)||0}function g(i,t){return i.includes("%")?t*a(i)/100:a(i)}const c=/(matrix3?d?)\((.+)\)/;class X{constructor(){n(this,"transformName","matrix");n(this,"transformValue",[1,0,0,1,0,0]);n(this,"originPosition",{x:0,y:0});n(this,"transformOriginX",.5);n(this,"transformOriginY",.5);n(this,"positionLeft",0);n(this,"positionTop",0);n(this,"translateX",0);n(this,"translateY",0);n(this,"transformScaleX",1);n(this,"transformScaleY",1);n(this,"styleScaleX",1);n(this,"styleScaleY",1);n(this,"scaleX",1);n(this,"scaleY",1);n(this,"transformRotate",0);n(this,"styleRotate",0);n(this,"rotate",0)}setVariantInfo(t,s){this.setTransform(t),this.setPosition(t),this.setTranslate(t),this.setScale(t),this.setRotate(t),this.setTransformOrigin(t,s)}setTransform(t){var r;const s=t.transform.match(c);this.transformName=(s==null?void 0:s[1])||"matrix",this.transformValue=((r=s==null?void 0:s[2])==null?void 0:r.split(",").map(Number))||[1,0,0,1,0,0]}setPosition(t){this.positionLeft=a(t.left),this.positionTop=a(t.top)}setTranslate(t){const s=t.translate.split(/\s+/);this.translateX=a(s[0]),this.translateY=a(s[1])}setScale(t){if(this.transformValue.length>6){const s=this.transformValue[0],r=this.transformValue[1],e=this.transformValue[4],o=this.transformValue[5];this.transformScaleX=l(Math.sqrt(s*s+r*r)),this.transformScaleY=l(Math.sqrt(e*e+o*o))}else{const s=this.transformValue[0],r=this.transformValue[1],e=this.transformValue[2],o=this.transformValue[3];this.transformScaleX=l(Math.sqrt(s*s+r*r)),this.transformScaleY=l(Math.sqrt(e*e+o*o))}if(t.scale&&t.scale!=="none"){const s=t.scale.split(/\s+/);this.styleScaleX=a(s[0]),this.styleScaleY=a(s[1]??s[0])}else this.styleScaleX=1,this.styleScaleY=1;this.scaleX=this.transformScaleX*this.styleScaleX,this.scaleY=this.transformScaleY*this.styleScaleY}setRotate(t){const s=this.transformValue[0],r=this.transformValue[1];this.transformRotate=l((Math.atan2(r,s)*180/Math.PI+360)%360),t.rotate&&t.rotate!=="none"?this.styleRotate=a(t.rotate):this.styleRotate=0,this.rotate=this.transformRotate+this.styleRotate}setTransformOrigin(t,s){const r=t.transformOrigin.split(/\s+/);this.originPosition.x=a(r[0]),this.originPosition.y=a(r[1]),s?this.resolveTransformOrigin(s):(this.transformOriginX=this.originPosition.x/a(t.width),this.transformOriginY=this.originPosition.y/a(t.height))}resolveTransformOrigin(t){const s=new Array().concat(t).join(" "),r=s.split(/\s+/);s.includes("left")?this.transformOriginX=0:s.includes("right")?this.transformOriginX=1:!r[0]||r[0].includes("center")?this.transformOriginX=.5:r[0].includes("%")?this.transformOriginX=a(r[0])/100:this.transformOriginX=0,s.includes("top")?this.transformOriginY=0:s.includes("bottom")?this.transformOriginY=1:!r[1]||r[1].includes("center")?this.transformOriginY=.5:r[1].includes("%")?this.transformOriginY=a(r[1])/100:this.transformOriginX=0}}function l(i){return Math.round(i*100)/100}function m(i,t){const s=i.deref();if(s)for(const r in t)s.style[r]=t[r]}function O(i,t,s){return!t||s?i:(...r)=>{const e=i(...r);return m(t,e),e}}export{O as c,g as e,X as f,a as r};
